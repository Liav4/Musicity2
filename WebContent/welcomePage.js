/*var usersArr = { 
	users : [
		{rating:8.7 ,
		name:"charlie" ,
		password:"123456" ,
		nickname:"Charlie-nickname" ,
		description:"hello I'm Charlie" ,
		image:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYbDQwMDRsUFRAWIB0iIiAdHx8kKDwsJCYxJx8fKDEtLDQ1PDQ1Iys0OD8sN0A5NC8BCgoKDg0OGxAQGiwkHiQ3LS0sLDUsLCwsLCwsLzQsLCwsLCwsLCwvMiwsLCwsLCwwLCwsLDQyLCwuNC0tLSwsLP/AABEIADIAMgMBEQACEQEDEQH/xAAbAAACAgMBAAAAAAAAAAAAAAADBgQFAAECB//EADgQAAICAQIEAwUFBgcAAAAAAAECAwQRAAUGEiExE0FhMkJRcYEUIiNikQcVJHKisTNDUlRjgqH/xAAbAQABBQEBAAAAAAAAAAAAAAADAAEEBQYCB//EACsRAAEDAwMCBAcBAAAAAAAAAAABAgMEBRESITETUTJBYZEGIiNCceHwFP/aAAwDAQACEQMRAD8A9tZgqlmIAA6knA0ycjci3Nu9vdTy7PywU/8AfSLzGUfGJexX87dD5KwOdUFxvbKfLI/EGZEoNtohm63J7lxs9TPYfB/6KQg+ijWXmvtS9yqih2swaXZKMefAWau3+qCxJGf6W/vocd5qGpjUJWZDR2d0245DtuVYd43CrOo/Kwwr/IgH8xPTWgt9/bI5Gzcg3xF3QuQ3q6T1n5427Ngg5HQgg9QQcgg9QRg607JUk8PBHVMEzRRCzvbncrw2oH+DiVWuAf5mfYiPocFmHmOUdidUF5uK08OhniDRNCW7MVKpPasNyQQRs0jY7KoJJ/Qaw8EbqiXH3KSVXSgrcCceVeMJbkMVR6k1fBVHkD+IhOA3QDBBxkeo6nVtcrQtDGjtWc+gKOTUW3Fu/wBfhnY5tzsxtIEICRK3KZHJ6DPl5kn4A99QrbQurJdOTt79JxwbxJX4p2RNxrxGE+IyyxM3N4bjBIzgZGCDnHnp7nb1o5emvuMx2onFztW4LdRuWtO6rbTyycKsvzBwrHzU5PsjVzYbk5H9Fy7A5WDTka2hHFfaW8WKxZOS1mzKxJ8wGKp+iIg+mvOL3P1KtU8iZEmEO91opuW2W6ErFUtQujMBkqGUrkfrqvpZv80zZE8jpyZEb9mHAVvhS1ft7jNA8sqhIhCxI5AcknIHcgdPTWgvd1jq4WtjBRMVBg4/4dfijhuXb4JESwrq8Jf2Sy56H0IJGdVtnrkpJkc/g7kbkF+znhqThbhwUbEiPZlmaSUochWIACg+eAo+uddXq4MrJdTfIaNuBktV0tVpa8vsSoyt8mGD/fVZTSPjkRzQjkyZtPENZtqptbmP2gwJ4vT3uUZ/916cyo+VCFgibQRFSaNmH4EsqsScY5ZGHX6YP11gLxCqVSoSmLsbqblXu3JoKjpMsAXxJEkBAduoUY79MnPl0+kaWkdFGj3HSLuWGq/fJ0Zpbruo5C3O4m3VTanAECMPFcnHIp6c3rgkdPhn5am00CTLpTk5VcBo7cDxNOk0bxJnmkRwygDv1GkyFzJkYNnJV7Pw69naaU7uytLXjYr16EqDjXpLIPlQhqpOvL+794JcBau4EYPks4XBU/zKBj1VvMjVF8QUCv8AqsTcLE4gb3RuLYi3TZihvQpyvWkbljtw5zyE+6wJJRvIkg9CdUtHUMkToVHC8L2X+5/QZzc7oBq8Y7M8hr3rH7suAffrbj+Ay/It91gfIqSDrmWzTN3YmpO6DdQLb4v4dqJzS7zSYkjCQyiVyT2ARMsf00KOzVL99OEF1CPVS/v12G5erS0drrOr16koxNYkHVZJR7qqeqp35sM2MAalyLDRRqyJdUi8r29E/PGRImon7qPtssWzQe1bybBU48Kvn8Rj8C3sD1YnyOi2SjdUS63JshxI7SNoRQMBVwPTW7RMJgjEa/Uhv1pK9mPxIXHVe3qCCOoIIBBHUEAjQ3NRyYdwPwL0jXtmyl6OW3TX2LsSc7qP+VFGc/mUEHuQuslcvh92VdBz2DMlCA7ZvdfH8HuEAPUEJKufl11QI2qpl5VA2xqvt21bQrTVaVKioH35I4UiAHqQBpOnqp1w5VX3FhACbpJuRMWwQ/bGOc2jkVo/Uv7/APKmT5Er3FpQWGaV6Ok2QG6TSXey7THtkcjGVrFucg2LLqA0jDt091QOiqOgHxJJO2gp2QsRrNiO52ottHGM0hGj20hC/wAS7Tts1KW1Nt1SSxj/ABngUv2+OM6jVDG44HKnhLZtqsJ4ljbKUrr2Z66MR1+JGhwsb2HyOcXsD5amochNIRmkI//Z"
		,topTopics:[{name:"topic1"} ,{name:"topic2"} ]},

		{ rating:6.4 , name:"charlie2" , password:"noTrustpwd" , nickname:"Charlie2-nickname" , description:"hello I'm Charlie2" , image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAIVBMVEX/////czn/5733xhDOMQDv7+/GxsZ7CBD/AAgQEBCtCBCWOK8hAAABsUlEQVRIiZXWCbLCIAwAUIFAW+9/4A8hO+BXZnRKzWvY7QtePxeAnxGk5NEXj+jGIUhcOdpBHBJzzDfJQBSiTT31kwkz0KYu/dwZcsLTHmFA8chdrGiSot9rOZnijeNh6oSIMSkFWkO9VVM0pVx602dOCMWUpFf8qGAMoeJrhCCSJeqD4XkpJecYmOWLDdh5KWSsmzfEMOE0+GPGj8ZhzRiwhCOwQFE6yzQypWqEAOYzd8Y1JYFtmrGKKdAY2lIAhzSMsr01x3kYJvahEBRvnxdtdTXhsaL6Ra2VSYI9aa1WQQC91g33Yxo7PiTqRFM8z6jyEMOaZooehiMOrT3PMGCXZUiDBMPyB+KMIVTVhunqT3ZmpGFMsN7csqTVXITM7teW83VRvcnhS+fCXMDZmyHed0e93pIlakxvRhnifd8dXbiW7VbmbZhDmeJGpZtZlmUMd2KmonVpj6WFxKKHH+/kHFFPgyV0BY5J0GCbcFvuD7+9uYpJEk6/vBu0K4pwYm7apufYwSxoJ8awxaPZgY2waHOgxz+lDUoL2AuPfPn0ZgOwYf+/CgX27esXaAm//AGz6hPQuX6sAgAAAABJRU5ErkJggg=="
		, topTopics:[{name:"topic13"} , {name:"topic23"} ]},
		{ rating:3.7 , name:"charlie3" , password:"nounce" , nickname:"Charlie-3nickname" , description:"hello I'm Charlie3" , image:"deps/img/default_profile_pic.jpg"
		, topTopics:[{name:"topic15"} , {name:"topic25"}, {name:"topic253"}]}
]};


*/



var homeApp = angular.module('homeApp', []);

homeApp.controller('getUsername', function ($scope, $http) {
  $scope.username = sessionStorage.thisUsername;
 // $scope.qText = 'question';
  //$scope.qTopics = 'TOPICSSS';
  $scope.submitQ = function() 
  {
  	if($scope.qText)
  	{
  		alert('New Question Submitted: ' +  $scope.qText + '\nTopics: '  + $scope.qTopics);
  	}
	
  	// sending the http request via angular



	var data = "{ " +
		"text: '" + $scope.qText + 
		"', topicsString: '" + $scope.qTopics +
		"' }";
	
	alert("data to send is: " + data);

	$http.post("http://localhost:8080/WebApp2/QuestionSubmission", data).then(function(response) {

		if (response.data == 1) {
			alert("Failed to submit the question");
		}
		else {
			alert("Question submitted successfully");
		}
		
		window.location.href = "http://localhost:8080/WebApp2/welcomePage.html";

	});	
	
	// sending the http request via ajax:

	/*

	var data2 = "{ " +
		"text: '" + $scope.qText + 
		"', topicsString: '" + $scope.qTopics +
		"' }";

	var xmlhttp = new XMLHttpRequest();
    var url = "http://localhost:8080/WebApp2/QuestionSubmission";

    alert("data to send is: " + data2);
    
    xmlhttp.open("POST", url, true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    
    xmlhttp.send("jsonObjectString=" + data2);

    xmlhttp.onreadystatechange = function() {

    	if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    	
    		alert("status = " + xmlhttp.status);
    		alert("ready state = " + xmlhttp.readyState);
    		alert("response text = " + xmlhttp.responseText);

    	}
    	
    } */
	
}	});